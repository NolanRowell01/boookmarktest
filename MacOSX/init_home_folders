# This script will query an AD OU and create user folders based on the return

OU="OU=Student,OU=Users,OU=Test,OU=SSCPS,DC=ad,DC=sscps,DC=org"
folders=( Documents Downloads Movies Music Desktop Public )

# Populate users array with objects in specified OU, using test/test123 AD account
$users=(`ldapsearch -H ldap://ad.sscps.org -x -D "test@ad.sscps.org" -w test123 -b $OU -s sub "(objectClass=user)" sAMAccountName | awk '/^sAMAccountName: /{print $NF}'`)

for u in ${users[@]}
do
   # Create folders and assign appropriate permissions
   for f in ${folders[@]}
   do
     # create user home folder and child folders based on folders array
     
     # verify permissions
   done
done
